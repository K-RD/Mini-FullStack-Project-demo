<!DOCTYPE html>
<html>

<head>
    <title>Result Fetch Dashboard</title>
</head>

<body>

    <h2>Fetch University Results (Raw JSON)</h2>

    <div>
        <input type="number" id="admission_year" placeholder="Admission Year (eg: 22)" />
        <input type="number" id="college_code" placeholder="College Code (eg: 153)" />
        <input type="number" id="branch_code" placeholder="Branch Code (eg: 153)" />
        <br><br>
        <input type="number" id="serial_start" placeholder="Serial Start (eg: 1)" />
        <input type="number" id="serial_end" placeholder="Serial End (eg: 50)" />
        <br><br>
        <input type="number" id="exam_year" placeholder="Exam Year (eg: 2024)" />
        <input type="text" id="semester" placeholder="Semester (eg: V)" />
        <input type="text" id="exam_held" placeholder="Exam Held (eg: July/2025)" />
        <br><br>
        <button onclick="fetchResults()">Start Fetching</button>
    </div>

    <h3>Status</h3>
    <pre id="result"></pre>

    <script>
        async function fetchResults() {

            const payload = {
                admission_year: Number(document.getElementById("admission_year").value),
                college_code: Number(document.getElementById("college_code").value),
                branch_code: Number(document.getElementById("branch_code").value),
                serial_start: Number(document.getElementById("serial_start").value),
                serial_end: Number(document.getElementById("serial_end").value),
                exam_year: Number(document.getElementById("exam_year").value),
                semester: document.getElementById("semester").value,
                exam_held: document.getElementById("exam_held").value
            };

            const response = await fetch(
                "https://mini-fullstack-project-demo.onrender.com/api/fetch-results",
                {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(payload)
                }
            );

            const data = await response.json();
            document.getElementById("result").textContent =
                JSON.stringify(data, null, 2);
        }
    </script>

</body>

</html>